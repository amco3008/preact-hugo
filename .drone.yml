kind: pipeline
name: my-super-pipeline-ci

steps:
- name: template
  image: lowess/preact-cli
  commands:
  - preact create ${DRONE_REPO_OWNER}/${DRONE_REPO_NAME}#${DRONE_COMMIT} test-ci

- name: dependencies
  image: lowess/preact-cli
  commands:
  - cd test-ci
  - npm install

- name: build
  image: lowess/preact-cli
  commands:
  - cd test-ci
  - npm run build

- name: deploy  
  image: plugins/gh-pages
  settings:
    username: ${DRONE_REPO_OWNER}
    password: a8c8de86093840c346fbf00f4af7aaa1b55219ae
    pages_directory: test-ci/dist/
    upstream_name: origin

# - name: deploy
#   image: lowess/preact-cli
#   commands:
#   - cd /drone/src/test-ci
#   - npm run build